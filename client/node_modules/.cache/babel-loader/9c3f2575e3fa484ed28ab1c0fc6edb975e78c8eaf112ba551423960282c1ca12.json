{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PubSub = void 0;\nvar events_1 = require(\"events\");\nvar pubsub_engine_1 = require(\"./pubsub-engine\");\nvar PubSub = function (_super) {\n  __extends(PubSub, _super);\n  function PubSub(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = _super.call(this) || this;\n    _this.ee = options.eventEmitter || new events_1.EventEmitter();\n    _this.subscriptions = {};\n    _this.subIdCounter = 0;\n    return _this;\n  }\n  PubSub.prototype.publish = function (triggerName, payload) {\n    this.ee.emit(triggerName, payload);\n    return Promise.resolve();\n  };\n  PubSub.prototype.subscribe = function (triggerName, onMessage) {\n    this.ee.addListener(triggerName, onMessage);\n    this.subIdCounter = this.subIdCounter + 1;\n    this.subscriptions[this.subIdCounter] = [triggerName, onMessage];\n    return Promise.resolve(this.subIdCounter);\n  };\n  PubSub.prototype.unsubscribe = function (subId) {\n    var _a = this.subscriptions[subId],\n      triggerName = _a[0],\n      onMessage = _a[1];\n    delete this.subscriptions[subId];\n    this.ee.removeListener(triggerName, onMessage);\n  };\n  return PubSub;\n}(pubsub_engine_1.PubSubEngine);\nexports.PubSub = PubSub;","map":{"version":3,"names":["events_1","require","pubsub_engine_1","PubSub","_super","__extends","options","_this","call","ee","eventEmitter","EventEmitter","subscriptions","subIdCounter","prototype","publish","triggerName","payload","emit","Promise","resolve","subscribe","onMessage","addListener","unsubscribe","subId","_a","removeListener","PubSubEngine","exports"],"sources":["../src/pubsub.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAMA,IAAAE,MAAA,aAAAC,MAAA;EAA4BC,SAAA,CAAAF,MAAA,EAAAC,MAAA;EAK1B,SAAAD,OAAYG,OAA2B;IAA3B,IAAAA,OAAA;MAAAA,OAAA,KAA2B;IAAA;IAAvC,IAAAC,KAAA,GACEH,MAAA,CAAAI,IAAA,MAAO;IACPD,KAAI,CAACE,EAAE,GAAGH,OAAO,CAACI,YAAY,IAAI,IAAIV,QAAA,CAAAW,YAAY,EAAE;IACpDJ,KAAI,CAACK,aAAa,GAAG,EAAE;IACvBL,KAAI,CAACM,YAAY,GAAG,CAAC;;EACvB;EAEOV,MAAA,CAAAW,SAAA,CAAAC,OAAO,GAAd,UAAeC,WAAmB,EAAEC,OAAY;IAC9C,IAAI,CAACR,EAAE,CAACS,IAAI,CAACF,WAAW,EAAEC,OAAO,CAAC;IAClC,OAAOE,OAAO,CAACC,OAAO,EAAE;EAC1B,CAAC;EAEMjB,MAAA,CAAAW,SAAA,CAAAO,SAAS,GAAhB,UAAiBL,WAAmB,EAAEM,SAAmC;IACvE,IAAI,CAACb,EAAE,CAACc,WAAW,CAACP,WAAW,EAAEM,SAAS,CAAC;IAC3C,IAAI,CAACT,YAAY,GAAG,IAAI,CAACA,YAAY,GAAG,CAAC;IACzC,IAAI,CAACD,aAAa,CAAC,IAAI,CAACC,YAAY,CAAC,GAAG,CAACG,WAAW,EAAEM,SAAS,CAAC;IAEhE,OAAOH,OAAO,CAACC,OAAO,CAAC,IAAI,CAACP,YAAY,CAAC;EAC3C,CAAC;EAEMV,MAAA,CAAAW,SAAA,CAAAU,WAAW,GAAlB,UAAmBC,KAAa;IACxB,IAAAC,EAAA,GAA2B,IAAI,CAACd,aAAa,CAACa,KAAK,CAAC;MAAnDT,WAAW,GAAAU,EAAA;MAAEJ,SAAS,GAAAI,EAAA,GAA6B;IAC1D,OAAO,IAAI,CAACd,aAAa,CAACa,KAAK,CAAC;IAChC,IAAI,CAAChB,EAAE,CAACkB,cAAc,CAACX,WAAW,EAAEM,SAAS,CAAC;EAChD,CAAC;EACH,OAAAnB,MAAC;AAAD,CAAC,CA9B2BD,eAAA,CAAA0B,YAAY;AAA3BC,OAAA,CAAA1B,MAAA,GAAAA,MAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}