{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withFilter = void 0;\nvar iterall_1 = require(\"iterall\");\nexports.withFilter = function (asyncIteratorFn, filterFn) {\n  return function (rootValue, args, context, info) {\n    var _a;\n    var asyncIterator = asyncIteratorFn(rootValue, args, context, info);\n    var getNextPromise = function () {\n      return new Promise(function (resolve, reject) {\n        var inner = function () {\n          asyncIterator.next().then(function (payload) {\n            if (payload.done === true) {\n              resolve(payload);\n              return;\n            }\n            Promise.resolve(filterFn(payload.value, args, context, info)).catch(function () {\n              return false;\n            }).then(function (filterResult) {\n              if (filterResult === true) {\n                resolve(payload);\n                return;\n              }\n              inner();\n              return;\n            });\n          }).catch(function (err) {\n            reject(err);\n            return;\n          });\n        };\n        inner();\n      });\n    };\n    var asyncIterator2 = (_a = {\n      next: function () {\n        return getNextPromise();\n      },\n      return: function () {\n        return asyncIterator.return();\n      },\n      throw: function (error) {\n        return asyncIterator.throw(error);\n      }\n    }, _a[iterall_1.$$asyncIterator] = function () {\n      return this;\n    }, _a);\n    return asyncIterator2;\n  };\n};","map":{"version":3,"names":["iterall_1","require","exports","withFilter","asyncIteratorFn","filterFn","rootValue","args","context","info","asyncIterator","getNextPromise","Promise","resolve","reject","inner","next","then","payload","done","value","catch","filterResult","err","asyncIterator2","_a","return","throw","error","$$asyncIterator"],"sources":["../src/with-filter.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AASaC,OAAA,CAAAC,UAAU,GAAG,UAACC,eAA2B,EAAEC,QAAkB;EACxE,OAAO,UAACC,SAAc,EAAEC,IAAS,EAAEC,OAAY,EAAEC,IAAS;;IACxD,IAAMC,aAAa,GAAGN,eAAe,CAACE,SAAS,EAAEC,IAAI,EAAEC,OAAO,EAAEC,IAAI,CAAC;IAErE,IAAME,cAAc,GAAG,SAAAA,CAAA;MACrB,OAAO,IAAIC,OAAO,CAAsB,UAACC,OAAO,EAAEC,MAAM;QAEtD,IAAMC,KAAK,GAAG,SAAAA,CAAA;UACZL,aAAa,CACVM,IAAI,EAAE,CACNC,IAAI,CAAC,UAAAC,OAAO;YACX,IAAIA,OAAO,CAACC,IAAI,KAAK,IAAI,EAAE;cACzBN,OAAO,CAACK,OAAO,CAAC;cAChB;;YAEFN,OAAO,CAACC,OAAO,CAACR,QAAQ,CAACa,OAAO,CAACE,KAAK,EAAEb,IAAI,EAAEC,OAAO,EAAEC,IAAI,CAAC,CAAC,CAC1DY,KAAK,CAAC;cAAM,YAAK;YAAL,CAAK,CAAC,CAClBJ,IAAI,CAAC,UAAAK,YAAY;cAChB,IAAIA,YAAY,KAAK,IAAI,EAAE;gBACzBT,OAAO,CAACK,OAAO,CAAC;gBAChB;;cAGFH,KAAK,EAAE;cACP;YACF,CAAC,CAAC;UACN,CAAC,CAAC,CACDM,KAAK,CAAC,UAACE,GAAG;YACTT,MAAM,CAACS,GAAG,CAAC;YACX;UACF,CAAC,CAAC;QACN,CAAC;QAEDR,KAAK,EAAE;MAET,CAAC,CAAC;IACJ,CAAC;IAED,IAAMS,cAAc,IAAAC,EAAA;MAClBT,IAAI,WAAAA,CAAA;QACF,OAAOL,cAAc,EAAE;MACzB,CAAC;MACDe,MAAM,WAAAA,CAAA;QACJ,OAAOhB,aAAa,CAACgB,MAAM,EAAE;MAC/B,CAAC;MACDC,KAAK,WAAAA,CAACC,KAAK;QACT,OAAOlB,aAAa,CAACiB,KAAK,CAACC,KAAK,CAAC;MACnC;OACAH,EAAA,CAACzB,SAAA,CAAA6B,eAAe,IAAhB;MACE,OAAO,IAAI;IACb,CAAC,E,GACF;IAED,OAAOL,cAAc;EACvB,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}