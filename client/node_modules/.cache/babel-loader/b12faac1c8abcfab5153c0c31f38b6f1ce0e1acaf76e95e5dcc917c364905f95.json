{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar graphql_1 = require(\"graphql\");\nvar isEmptyObject_1 = require(\"../isEmptyObject\");\nvar visitSchema_1 = require(\"./visitSchema\");\nvar schemaRecreation_1 = require(\"../stitching/schemaRecreation\");\nvar TransformRootFields = /** @class */function () {\n  function TransformRootFields(transform) {\n    this.transform = transform;\n  }\n  TransformRootFields.prototype.transformSchema = function (originalSchema) {\n    var _a;\n    var _this = this;\n    return visitSchema_1.visitSchema(originalSchema, (_a = {}, _a[visitSchema_1.VisitSchemaKind.QUERY] = function (type) {\n      return transformFields(type, function (fieldName, field) {\n        return _this.transform('Query', fieldName, field);\n      });\n    }, _a[visitSchema_1.VisitSchemaKind.MUTATION] = function (type) {\n      return transformFields(type, function (fieldName, field) {\n        return _this.transform('Mutation', fieldName, field);\n      });\n    }, _a[visitSchema_1.VisitSchemaKind.SUBSCRIPTION] = function (type) {\n      return transformFields(type, function (fieldName, field) {\n        return _this.transform('Subscription', fieldName, field);\n      });\n    }, _a));\n  };\n  return TransformRootFields;\n}();\nexports.default = TransformRootFields;\nfunction transformFields(type, transformer) {\n  var resolveType = schemaRecreation_1.createResolveType(function (name, originalType) {\n    return originalType;\n  });\n  var fields = type.getFields();\n  var newFields = {};\n  Object.keys(fields).forEach(function (fieldName) {\n    var field = fields[fieldName];\n    var newField = transformer(fieldName, field);\n    if (typeof newField === 'undefined') {\n      newFields[fieldName] = schemaRecreation_1.fieldToFieldConfig(field, resolveType, true);\n    } else if (newField !== null) {\n      if (newField.name) {\n        newFields[newField.name] = newField.field;\n      } else {\n        newFields[fieldName] = newField;\n      }\n    }\n  });\n  if (isEmptyObject_1.default(newFields)) {\n    return null;\n  } else {\n    return new graphql_1.GraphQLObjectType({\n      name: type.name,\n      description: type.description,\n      astNode: type.astNode,\n      fields: newFields\n    });\n  }\n}","map":{"version":3,"names":["graphql_1","require","isEmptyObject_1","visitSchema_1","schemaRecreation_1","TransformRootFields","transform","prototype","transformSchema","originalSchema","_this","visitSchema","_a","VisitSchemaKind","QUERY","type","transformFields","fieldName","field","MUTATION","SUBSCRIPTION","transformer","resolveType","createResolveType","name","originalType","fields","getFields","newFields","Object","keys","forEach","newField","fieldToFieldConfig","default","GraphQLObjectType","description","astNode"],"sources":["../../src/transforms/TransformRootFields.ts"],"sourcesContent":[null],"mappings":";;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AAOA,IAAAC,eAAA,GAAAD,OAAA;AAEA,IAAAE,aAAA,GAAAF,OAAA;AACA,IAAAG,kBAAA,GAAAH,OAAA;AAeA,IAAAI,mBAAA;EAGE,SAAAA,oBAAYC,SAA0B;IACpC,IAAI,CAACA,SAAS,GAAGA,SAAS;EAC5B;EAEOD,mBAAA,CAAAE,SAAA,CAAAC,eAAe,GAAtB,UAAuBC,cAA6B;;IAApD,IAAAC,KAAA;IACE,OAAOP,aAAA,CAAAQ,WAAW,CAACF,cAAc,GAAAG,EAAA,OAC/BA,EAAA,CAACT,aAAA,CAAAU,eAAe,CAACC,KAAK,IAAG,UAACC,IAAuB;MAC/C,OAAOC,eAAe,CACpBD,IAAI,EACJ,UAACE,SAAiB,EAAEC,KAA6B;QAC/C,OAAAR,KAAI,CAACJ,SAAS,CAAC,OAAO,EAAEW,SAAS,EAAEC,KAAK,CAAC;MAAzC,CAAyC,CAC5C;IACH,CAAC,EACDN,EAAA,CAACT,aAAA,CAAAU,eAAe,CAACM,QAAQ,IAAG,UAACJ,IAAuB;MAClD,OAAOC,eAAe,CACpBD,IAAI,EACJ,UAACE,SAAiB,EAAEC,KAA6B;QAC/C,OAAAR,KAAI,CAACJ,SAAS,CAAC,UAAU,EAAEW,SAAS,EAAEC,KAAK,CAAC;MAA5C,CAA4C,CAC/C;IACH,CAAC,EACDN,EAAA,CAACT,aAAA,CAAAU,eAAe,CAACO,YAAY,IAAG,UAACL,IAAuB;MACtD,OAAOC,eAAe,CACpBD,IAAI,EACJ,UAACE,SAAiB,EAAEC,KAA6B;QAC/C,OAAAR,KAAI,CAACJ,SAAS,CAAC,cAAc,EAAEW,SAAS,EAAEC,KAAK,CAAC;MAAhD,CAAgD,CACnD;IACH,CAAC,E,IACD;EACJ,CAAC;EACH,OAAAb,mBAAC;AAAD,CAAC,EAhCD;;AAkCA,SAASW,eAAeA,CACtBD,IAAuB,EACvBM,WAOa;EAEb,IAAMC,WAAW,GAAGlB,kBAAA,CAAAmB,iBAAiB,CACnC,UAACC,IAAY,EAAEC,YAA8B;IAC3C,OAAAA,YAAY;EAAZ,CAAY,CACf;EACD,IAAMC,MAAM,GAAGX,IAAI,CAACY,SAAS,EAAE;EAC/B,IAAMC,SAAS,GAAG,EAAE;EACpBC,MAAM,CAACC,IAAI,CAACJ,MAAM,CAAC,CAACK,OAAO,CAAC,UAAAd,SAAS;IACnC,IAAMC,KAAK,GAAGQ,MAAM,CAACT,SAAS,CAAC;IAC/B,IAAMe,QAAQ,GAAGX,WAAW,CAACJ,SAAS,EAAEC,KAAK,CAAC;IAC9C,IAAI,OAAOc,QAAQ,KAAK,WAAW,EAAE;MACnCJ,SAAS,CAACX,SAAS,CAAC,GAAGb,kBAAA,CAAA6B,kBAAkB,CAACf,KAAK,EAAEI,WAAW,EAAE,IAAI,CAAC;KACpE,MAAM,IAAIU,QAAQ,KAAK,IAAI,EAAE;MAC5B,IAC0DA,QAAS,CAACR,IAAI,EACtE;QACAI,SAAS,CACiDI,QAAS,CAACR,IAAI,CACvE,GAGCQ,QAAS,CAACd,KAAK;OAClB,MAAM;QACLU,SAAS,CAACX,SAAS,CAAC,GAAGe,QAAQ;;;EAGrC,CAAC,CAAC;EACF,IAAI9B,eAAA,CAAAgC,OAAa,CAACN,SAAS,CAAC,EAAE;IAC5B,OAAO,IAAI;GACZ,MAAM;IACL,OAAO,IAAI5B,SAAA,CAAAmC,iBAAiB,CAAC;MAC3BX,IAAI,EAAET,IAAI,CAACS,IAAI;MACfY,WAAW,EAAErB,IAAI,CAACqB,WAAW;MAC7BC,OAAO,EAAEtB,IAAI,CAACsB,OAAO;MACrBX,MAAM,EAAEE;KACT,CAAC;;AAEN"},"metadata":{},"sourceType":"script","externalDependencies":[]}